{% extends 'base.html' %}

{% block section %}

<div class="container py-5">
  <h2 class="text-center mb-4" style="color:#e50914;">Choose Your Plan</h2>
  <div class="row g-4">

    <!-- Basic Plan -->
     {% for plan in plans%}
    <div class="col-md-4">
      <div class="card h-100 text-center plan-card" onclick="highlightCard(this)" style="background-color:#1a1a1a; border:1px solid #2a2a2a; color:#fff;">
        <div class="card-body">
          <h5 class="card-title" style="color:#e50914;">{{plan.name}}</h5>
          <h3 style="margin:10px 0;">₹{{plan.amount}}/month</h3>
          <ul class="list-unstyled text-start" style="font-size:14px;">
            <li>✔ {% for device in plan.devices %}<span class="me-3">{{device}}</span> {% endfor%}</li>
            <li>✔ {{plan.quality}} quality</li>
            <li>✔ {{plan.no_of_screens}} screen at a time</li>
            <li>✔ Download on {{plan.download_devices}} device</li>
          </ul>
          <a href="#" class="btn btn-danger ms-2" data-bs-toggle="modal" data-bs-target="#planModal{{plan.id}}">Get {{plan.name}}</a>
        </div>
      </div>
    </div>
    <div class="modal fade" id="planModal{{plan.id}}" tabindex="-1" aria-labelledby="planModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="planModalLabel">Confirm Your Plan</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body">
        <h6>Plan Details</h6>
        <ul class="list-group mb-3">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Plan Name <span class="fw-bold">{{plan.name}}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Amount <span class="fw-bold">₹{{plan.amount}}/month</span>
          </li>
        </ul>
        <p class="text-muted">Please confirm your subscription plan before proceeding with payment.</p>
      </div>
      
      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="{% url 'razorpay' plan.uuid %}"><button type="button" class="btn btn-success">Pay Now</button></a>
      </div>
      
    </div>
  </div>
</div>
    {% endfor %}
  </div>
</div>


<script>
function highlightCard(selectedCard) {
  // Reset all cards
  document.querySelectorAll('.plan-card').forEach(card => {
    card.style.border = "1px solid #2a2a2a";
  });
  // Highlight the clicked card
  selectedCard.style.border = "2px solid #e50914";
}
</script>

{% endblock %}